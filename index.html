<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>NOPAR by afbobak</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>NOPAR</h1>
        <p>Node PAckage Registry</p>

        <p class="view"><a href="https://github.com/afbobak/nopar">View the Project on GitHub <small>afbobak/nopar</small></a></p>


        <ul>
          <li><a href="https://github.com/afbobak/nopar/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/afbobak/nopar/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/afbobak/nopar">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>Provides a local NPM registry that also proxies and caches unknown node packages
from the original npm registry at <a href="http://registry.npmjs.org">http://registry.npmjs.org</a>.</p>

<p><a href="https://travis-ci.org/afbobak/nopar"><img src="https://travis-ci.org/afbobak/nopar.png" alt="Build Status"></a></p>

<h2>Install the server</h2>

<p>It's available from the official NPM registry, so all you need is:</p>

<pre><code>npm install -g nopar
</code></pre>

<p>On my build server I create an archive (see <code>scripts/package</code>) and extract the
whole shebang into <code>/usr/local/nopar</code> with an install script
(see <code>scripts/install-nopar.sh</code>).</p>

<h2>Usage</h2>

<p>If you installed NOPAR via `<code>npm install</code> -g nopar`, then a start script is be
installed into your path and you can simply run:</p>

<p>Run:</p>

<pre><code>nopar
</code></pre>

<p>With the default configuration, the registry is available at
<a href="http://localhost:5984/">http://localhost:5984/</a>. Point your browser at it and you should see an empty
registry.</p>

<p>Fill your local registry by configuring the
<a href="https://npmjs.org/doc/config.html">npm command</a> to use it:</p>

<pre><code>npm config set registry http://localhost:5984/
npm cache clear
npm login
</code></pre>

<p>Sometimes npm seems confused with cached packages from other repositories,
clearing the cache remedies those issues.</p>

<p>The login is required for npm to work but NOPAR doesn't implement any user
management and currently accepts everyone.</p>

<p>Install packages with <code>npm install PACKAGE</code> and NOPAR will automatically proxy
and cache the packages and dependencies into your private NOPAR.</p>

<p>Of course you can also publish to NOPAR. Those packages won't get promoted to
the official <a href="http://registry.npmjs.org/">registry</a> by NOPAR and will be marked
with a green "local" tag in the browser interface.</p>

<p>For configuring the registry, see the section "Default Environment Variables"
below.</p>

<h2>Default Environment Variables</h2>

<p>The service's defaults are configured via environment variables. The following
parameters are available:</p>

<ul>
<li>NOPAR_HOSTNAME - Hostname that the service is bound to (default="localhost")</li>
<li>NOPAR_PORT - TCP port the service is running on (default=5984)</li>
<li>NOPAR_AUTO_FORWARD - "yes" if NOPAR should automatically forward requests for
unknown packages to the forwarder registry, "no" if you really just want a
local registry without the auto-caching facility (default="yes")</li>
<li>NOPAR_FORWARDER_URL - The URL of the registry NOPAR forwards requests for
unknown packages to (default="<a href="https://registry.npmjs.org%22">https://registry.npmjs.org"</a>)</li>
<li>NOPAR_PROXY_URL - The URL of a proxy to use, empty for not using a proxy
(default="")</li>
<li>NOPAR_USER_AGENT - The user agent to use to make the requests as
(default=nopar/)</li>
<li>NOPAR_LOGFILE - Location of the logfile if we spawn, empty for console
(default="")</li>
<li>NOPAR_LOGLEVEL - Loglevel to use (default="info")</li>
<li>NOPAR_REGISTRY_PATH - Location of the registry, leaving this empty will put
the registry in a folder "registry" inside the nopar folder (default="")</li>
<li>NOPAR_HOME - Homefolder to change to before running, empty for installation
location (default="")</li>
<li>NOPAR_RUN_PATH - Location for runtime files, primarily the PID file if running
as a daemon (default="")</li>
<li>NOPAR_RUNAS_USER - The user to run as if running as a daemon, empty for not
running as a daemon (default="")</li>
</ul><p>If the environment variable <code>NOPAR_RUNAS_USER</code> is set, the service will run
as a daemon.</p>

<p>You can override some of those settings from within NOPAR on the Settings page.
Everything that is set in the Settings page takes priority over the environment
variables.</p>

<h2>Upstart Configuration</h2>

<p>There's an example <a href="http://upstart.ubuntu.com">upstart</a> configuration file that
you can use and adapt for your own purpose:</p>

<p><code>scripts/nopar.conf</code></p>

<h2>Known Issues</h2>

<ul>
<li>Missing user management. Welcome to the "Admin Party"!</li>
<li>Once a package meta is cached, it doesn't get updated from the
<a href="http://registry.npmjs.org">upstream registry</a> automatically. You can refresh
the package meta from the <a href="http://registry.npmjs.org">upstream registry</a> by
clicking on the "Refresh" link for that package in the user interface.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/afbobak">afbobak</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>